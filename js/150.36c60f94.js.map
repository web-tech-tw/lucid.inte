{"version":3,"file":"js/150.36c60f94.js","mappings":"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","sources":["webpack://lucid.inte/./src/views/HomeView.vue?8a90","webpack://lucid.inte/src/views/HomeView.vue","webpack://lucid.inte/./src/views/HomeView.vue?4768","webpack://lucid.inte/./src/views/HomeView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"bg-black h-96 overflow-hidden\",on:{\"click\":_vm.documentHandleClickBox}},[_c('div',{ref:\"screenContainer\"},[_c('div',{attrs:{\"id\":\"screen\"}}),_c('canvas',{staticClass:\"mx-auto\",attrs:{\"id\":\"vga\"}})])]),_c('div',{staticClass:\"mt-5 px-3 w-full flex justify-between\"},[_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonPower}},[_vm._v(\" 電源 \")]),_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonPause}},[_vm._v(\" \"+_vm._s(_vm.emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\")+\" \")]),_c('button',{staticClass:\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonFullScreen}},[_vm._v(\" 進入全螢幕 \")]),_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonReset}},[_vm._v(\" 重置 \")])]),_c('div',{staticClass:\"mt-5 px-3 w-full flex justify-center\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.virtualKeyboardBlackHole),expression:\"virtualKeyboardBlackHole\"}],staticClass:\"rounded-md resize-none border-2 text-center\",attrs:{\"placeholder\":\"虛擬鍵盤呼出器\"},domProps:{\"value\":(_vm.virtualKeyboardBlackHole)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.virtualKeyboardBlackHole=$event.target.value}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"bg-black h-96 overflow-hidden\" @click=\"documentHandleClickBox\">\n      <div ref=\"screenContainer\">\n        <div id=\"screen\"></div>\n        <canvas id=\"vga\" class=\"mx-auto\"></canvas>\n      </div>\n    </div>\n    <div class=\"mt-5 px-3 w-full flex justify-between\">\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonPower\"\n      >\n        電源\n      </button>\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonPause\"\n      >\n        {{ emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\" }}\n      </button>\n      <button\n        class=\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonFullScreen\"\n      >\n        進入全螢幕\n      </button>\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonReset\"\n      >\n        重置\n      </button>\n    </div>\n    <div class=\"mt-5 px-3 w-full flex justify-center\">\n      <textarea\n        v-model=\"virtualKeyboardBlackHole\"\n        class=\"rounded-md resize-none border-2 text-center\"\n        placeholder=\"虛擬鍵盤呼出器\"\n      ></textarea>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"HomeView\",\n  data: () => ({\n    isPowerPressed: false,\n    isDownloadCompleted: false,\n    isShowOptionsMenu: false,\n    isShowRestoreModal: false,\n    progressTicks: -1,\n    progressState: \"\",\n    emulator: null,\n    emulatorExtendedInfo: {\n      isPaused: false,\n      mouseEnabled: false,\n    },\n    restoreFile: null,\n    virtualKeyboardBlackHole: \" \",\n    systemProfile: {\n      default: {\n        memory_size: 64 * 1024 * 1024,\n        vga_memory_size: 8 * 1024 * 1024,\n        cdrom: {\n          url: \"./machine/system.iso\",\n          size: 23068672,\n        },\n      },\n    },\n  }),\n  watch: {\n    isDownloadCompleted(isCompleted) {\n      if (!isCompleted || !this.isPowerPressed) return;\n      setTimeout(() => {\n        this.machinePowerBoot(this.emulator);\n      }, 500);\n    },\n    virtualKeyboardBlackHole(newValue) {\n      if (newValue === \" \") return;\n      if (newValue === \"\") {\n        const value = 0x00e; // Backspace\n        this.machineSendKeyboardCode(this.emulator, value);\n      } else {\n        const value = newValue.substring(1);\n        this.machineSendKeyboardText(this.emulator, value);\n      }\n      window.requestAnimationFrame(() => {\n        this.virtualKeyboardBlackHole = \" \";\n      });\n    },\n  },\n  computed: {\n    isEmulatorRunning() {\n      if (this.emulatorExtendedInfo.isPaused) return true;\n      return this.emulator && this.emulator.is_running();\n    },\n    isInFullScreen() {\n      return !!document.fullscreenElement;\n    },\n    isShowProgressBar() {\n      return this.progressTicks >= 0;\n    },\n    isShowInitPowerButton() {\n      return (\n        (!this.isDownloadCompleted && !this.isPowerPressed) ||\n        (this.isDownloadCompleted && !this.isEmulatorRunning)\n      );\n    },\n    isShowModal() {\n      return this.isShowRestoreModal;\n    },\n    progressPercentage() {\n      const progressValue = this.progressTicks < 1 ? this.progressTicks : 1;\n      return progressValue * 100;\n    },\n    progressPercentageString() {\n      const value = this.progressPercentage;\n      return `${value.toFixed(0)}%`;\n    },\n    progressBarStyle() {\n      return {\n        width: this.progressPercentageString,\n      };\n    },\n    powerPauseText() {\n      return this.emulatorExtendedInfo.isPaused ? \"Resume\" : \"Pause\";\n    },\n    powerResetText() {\n      return \"Reset\";\n    },\n    powerPowerText() {\n      return this.isEmulatorRunning ? \"Power OFF\" : \"Power ON\";\n    },\n    operationBoxClass() {\n      return {\n        fade: true,\n        show: this.isEmulatorRunning,\n      };\n    },\n    optionsMenuClass() {\n      return {\n        \"dropdown-menu\": true,\n        \"dropdown-menu-right\": true,\n        \"d-block\": this.isShowOptionsMenu,\n      };\n    },\n    restoreModalClass() {\n      return {\n        modal: true,\n        fade: true,\n        show: this.isShowRestoreModal,\n        \"d-block\": this.isShowRestoreModal,\n      };\n    },\n    emulatorScreenInfo() {\n      return this.emulator.v86.cpu.devices.vga.stats;\n    },\n    emulatorEventMethods() {\n      return [\n        {\n          name: \"download-progress\",\n          method: (e) => {\n            this.progressTicks = 0;\n\n            if (e.file_name.endsWith(\".wasm\")) {\n              const filenameRaw = e.file_name.split(\"/\");\n              const filename = filenameRaw[filenameRaw.length - 1];\n              this.progressState = `Fetching \"${filename}\" ...`;\n              return;\n            }\n\n            if (\n              e.file_index === e.file_count - 1 &&\n              e.loaded >= e.total - 2048\n            ) {\n              this.isDownloadCompleted = true;\n              this.progressState = \"Download completed!\";\n              if (!this.isPowerPressed) {\n                this.progressState += \" Click power button to start.\";\n              }\n              setTimeout(() => {\n                this.progressTicks = -1;\n                this.progressState = \"\";\n              }, 3000);\n              return;\n            }\n\n            if (typeof e.file_index === \"number\" && e.file_count) {\n              this.progressState = `Downloading images (${e.file_index + 1}/${\n                e.file_count\n              }) ...`;\n            }\n\n            if (e.total && typeof e.loaded === \"number\") {\n              this.progressTicks = e.loaded / e.total;\n            } else {\n              this.progressState += \".\".repeat(this.progressTicks++ % 50);\n            }\n          },\n        },\n        {\n          name: \"download-error\",\n          method: (e) => {\n            this.progressTicks = 0;\n            this.progressState = `\n              Error: Loading \"${e.file_name}\" failed.\n              Check your connection and reload the page to try again later.\n            `;\n          },\n        },\n        {\n          name: \"mouse-enable\",\n          method: (isEnabled) => {\n            this.emulatorExtendedInfo.mouseEnabled = isEnabled;\n          },\n        },\n        {\n          name: \"screen-set-mode\",\n          method: () => {\n            this.documentHandleResizeScreen();\n          },\n        },\n        {\n          name: \"screen-set-size-graphical\",\n          method: () => {\n            this.documentHandleResizeScreen();\n          },\n        },\n        {\n          name: \"emulator-stopped\",\n          method: () => {\n            if (!this.isInFullScreen) return;\n            this.documentRequestExitFullScreen();\n          },\n        },\n      ];\n    },\n  },\n  methods: {\n    machineSetup(baseProfile) {\n      const system = { ...baseProfile };\n      // Setup WASM\n      system.wasm_path = \"./v86.wasm\";\n      // Setup BIOS\n      system.bios = {\n        url: \"./machine/bios/seabios.bin\",\n      };\n      system.vga_bios = {\n        url: \"./machine/bios/vgabios.bin\",\n      };\n      // Setup Network Relay\n      system.network_relay_url =\n        system.network_relay_url || \"wss://relay.widgetry.org/\";\n      // Setup Screen Container\n      system.screen_container = this.$refs.screenContainer;\n      // Mount Machine\n      const V86Starter = window.V86Starter;\n      this.emulator = new V86Starter(system);\n      // Return Machine\n      return this.emulator;\n    },\n    machineSetupEventListener(machine) {\n      for (const e of this.emulatorEventMethods) {\n        machine.add_listener(e.name, e.method);\n      }\n    },\n    machineScreenSetScale(machine, scale) {\n      machine.screen_set_scale(scale);\n    },\n    async machineStateSave(machine) {\n      // Save the state of the machine\n      const state = await machine.save_state();\n      const stateObject = new Blob([state]);\n      // Create virtual download link\n      const a = document.createElement(\"a\");\n      a.download = `lucid-state.bin`;\n      a.href = window.URL.createObjectURL(stateObject);\n      a.dataset.downloadurl = `application/octet-stream:${a.download}:${a.href}`;\n      // Trigger virtual download link\n      a.click();\n    },\n    machineStateRestore(machine, file) {\n      machine.stop();\n\n      const filereader = new FileReader();\n\n      filereader.onload = (e) => {\n        machine.restore_state(e.target.result);\n        machine.run();\n      };\n\n      filereader.readAsArrayBuffer(file);\n    },\n    machinePowerBoot(machine) {\n      this.isPowerPressed = true;\n      if (!this.isDownloadCompleted) return;\n      if (this.isEmulatorRunning) {\n        machine.stop();\n        machine.restart();\n      } else {\n        machine.run();\n      }\n    },\n    machineSendKeyboardText(machine, text) {\n      machine.keyboard_send_text(text);\n    },\n    machineSendKeyboardCode(machine, code) {\n      machine.bus.send(\"keyboard-code\", code);\n    },\n    machinePowerPause(machine) {\n      if (this.emulatorExtendedInfo.isPaused) {\n        machine.run();\n        this.emulatorExtendedInfo.isPaused = false;\n      } else {\n        machine.stop();\n        this.emulatorExtendedInfo.isPaused = true;\n      }\n    },\n    machinePowerReset(machine) {\n      machine.restart();\n    },\n    documentLockMouse() {\n      const body = document.body;\n      const method =\n        body.requestPointerLock ||\n        body.mozRequestPointerLock ||\n        body.webkitRequestPointerLock ||\n        body.msRequestPointerLock;\n      if (method) {\n        method.call(body);\n      } else {\n        console.warn(\"The browser is not support requestPointerLock\");\n      }\n    },\n    documentRequestFullScreen() {\n      const element = this.$refs.screenContainer;\n      const method =\n        element.requestFullscreen ||\n        element.mozRequestFullScreen ||\n        element.webkitRequestFullscreen ||\n        element.msRequestFullscreen;\n      if (method) {\n        method.call(element);\n      } else {\n        console.warn(\"The browser is not support requestFullscreen\");\n      }\n    },\n    documentRequestExitFullScreen() {\n      const method =\n        document.exitFullscreen ||\n        document.mozCancelFullScreen ||\n        document.webkitExitFullscreen ||\n        document.msExitFullscreen;\n      if (method) {\n        method.call(document);\n      } else {\n        console.warn(\"The browser is not support exitFullscreen\");\n      }\n    },\n    documentHandleResizeScreen() {\n      if (!this.isEmulatorRunning) return;\n      if (!this.emulatorScreenInfo.is_graphical) {\n        this.machineScreenSetScale(this.emulator, 1);\n      }\n      const documentScreen = {\n        width: this.$refs.screenContainer.clientWidth || 1,\n        height: this.$refs.screenContainer.clientHeight || 1,\n      };\n      const emulatorScreen = {\n        width: this.emulatorScreenInfo.res_x || 1,\n        height: this.emulatorScreenInfo.res_y || 1,\n      };\n      const widthScale = documentScreen.width / emulatorScreen.width;\n      const heightScale = documentScreen.height / emulatorScreen.height;\n      const scale = Math.min(widthScale, heightScale);\n      this.machineScreenSetScale(this.emulator, scale);\n    },\n    documentHandleChangeRestoreFile(e) {\n      this.restoreFile = e.target.files[0];\n    },\n    documentHandleClickBox() {\n      if (this.emulatorExtendedInfo.mouseEnabled) {\n        this.documentLockMouse();\n      }\n    },\n    documentHandleClickButtonPower() {\n      this.machinePowerBoot(this.emulator);\n    },\n    documentHandleClickButtonPause() {\n      this.machinePowerPause(this.emulator);\n    },\n    documentHandleClickButtonReset() {\n      this.machinePowerReset(this.emulator);\n    },\n    documentHandleClickButtonFullScreen() {\n      this.documentRequestFullScreen();\n    },\n    documentHandleClickButtonOptions() {\n      this.isShowOptionsMenu = !this.isShowOptionsMenu;\n    },\n    documentHandleClickButtonOptionsCallSmartphoneVirtualKeyboard() {\n      this.$refs.virtualKeyboardCaller.focus();\n      this.isShowOptionsMenu = false;\n    },\n    documentHandleClickButtonOptionsRestore() {\n      if (!this.emulatorExtendedInfo.isPaused) {\n        this.machinePowerPause(this.emulator);\n      }\n      this.isShowRestoreModal = true;\n      this.isShowOptionsMenu = false;\n    },\n    documentHandleClickButtonOptionsSave() {\n      this.machineStateSave(this.emulator);\n      this.isShowOptionsMenu = false;\n    },\n    documentHandleClickButtonRestoreCancel() {\n      if (this.emulatorExtendedInfo.isPaused) {\n        this.machinePowerPause(this.emulator);\n      }\n      this.restoreFile = null;\n      this.isShowRestoreModal = false;\n    },\n    documentHandleClickButtonRestoreImport() {\n      if (this.emulatorExtendedInfo.isPaused) {\n        this.machinePowerPause(this.emulator);\n      }\n      this.machineStateRestore(this.emulator, this.restoreFile);\n      this.isShowRestoreModal = false;\n    },\n  },\n  created() {\n    window.addEventListener(\"resize\", this.documentHandleResizeScreen);\n  },\n  destroyed() {\n    window.removeEventListener(\"resize\", this.documentHandleResizeScreen);\n  },\n  mounted() {\n    this.documentHandleResizeScreen();\n    const params = new URLSearchParams(window.location.search);\n    const profileName = params.get(\"profile\");\n    const baseProfile =\n      this.systemProfile[profileName] || this.systemProfile.default;\n    if (params.get(\"network_relay_url\")) {\n      baseProfile.network_relay_url = params.get(\"network_relay_url\");\n    }\n    const machine = this.machineSetup(baseProfile);\n    this.machineSetupEventListener(machine);\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomeView.vue?vue&type=template&id=22d5e6dc&\"\nimport script from \"./HomeView.vue?vue&type=script&lang=js&\"\nexport * from \"./HomeView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","documentHandleClickBox","ref","attrs","documentHandleClickButtonPower","_v","documentHandleClickButtonPause","_s","emulatorExtendedInfo","isPaused","documentHandleClickButtonFullScreen","documentHandleClickButtonReset","directives","name","rawName","value","expression","domProps","$event","target","composing","virtualKeyboardBlackHole","staticRenderFns","data","isPowerPressed","isDownloadCompleted","isShowOptionsMenu","isShowRestoreModal","progressTicks","progressState","emulator","mouseEnabled","restoreFile","systemProfile","default","memory_size","vga_memory_size","cdrom","url","size","watch","isCompleted","setTimeout","machinePowerBoot","newValue","machineSendKeyboardCode","substring","machineSendKeyboardText","window","requestAnimationFrame","computed","isEmulatorRunning","is_running","isInFullScreen","document","fullscreenElement","isShowProgressBar","isShowInitPowerButton","isShowModal","progressPercentage","progressValue","progressPercentageString","toFixed","progressBarStyle","width","powerPauseText","powerResetText","powerPowerText","operationBoxClass","fade","show","optionsMenuClass","restoreModalClass","modal","emulatorScreenInfo","v86","cpu","devices","vga","stats","emulatorEventMethods","method","e","file_name","methods","machineSetup","baseProfile","system","wasm_path","bios","vga_bios","network_relay_url","screen_container","$refs","screenContainer","V86Starter","machineSetupEventListener","machine","add_listener","machineScreenSetScale","scale","screen_set_scale","async","state","save_state","stateObject","Blob","a","createElement","download","href","URL","createObjectURL","dataset","downloadurl","click","machineStateRestore","file","stop","filereader","FileReader","onload","restore_state","result","run","readAsArrayBuffer","restart","text","keyboard_send_text","code","bus","send","machinePowerPause","machinePowerReset","documentLockMouse","body","call","console","warn","documentRequestFullScreen","element","documentRequestExitFullScreen","documentHandleResizeScreen","is_graphical","documentScreen","clientWidth","height","clientHeight","emulatorScreen","res_x","res_y","widthScale","heightScale","Math","min","documentHandleChangeRestoreFile","files","documentHandleClickButtonOptions","documentHandleClickButtonOptionsCallSmartphoneVirtualKeyboard","virtualKeyboardCaller","focus","documentHandleClickButtonOptionsRestore","documentHandleClickButtonOptionsSave","machineStateSave","documentHandleClickButtonRestoreCancel","documentHandleClickButtonRestoreImport","created","addEventListener","destroyed","removeEventListener","mounted","params","URLSearchParams","location","search","profileName","get","component"],"sourceRoot":""}