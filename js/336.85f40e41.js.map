{"version":3,"file":"js/336.85f40e41.js","mappings":"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","sources":["webpack://lucid.inte/./src/views/HomeView.vue?18ff","webpack://lucid.inte/src/views/HomeView.vue","webpack://lucid.inte/./src/views/HomeView.vue?4768","webpack://lucid.inte/./src/views/HomeView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowProgressCircle),expression:\"isShowProgressCircle\"}],staticClass:\"\\n      fixed\\n      inline-flex\\n      items-center\\n      justify-center\\n      overflow-hidden\\n      rounded-full\\n      top-0\\n      right-12\\n      md:right-1/2\\n      2xl:right-2\\n      bg-white\\n      hover:cursor-pointer\\n    \",on:{\"click\":_vm.documentHandleClickButtonInitPower}},[_c('svg',{staticClass:\"w-20 h-20\"},[_c('circle',{staticClass:\"text-gray-300\",attrs:{\"stroke-width\":\"5\",\"stroke\":\"currentColor\",\"fill\":\"transparent\",\"r\":\"30\",\"cx\":\"40\",\"cy\":\"40\"}}),_c('circle',{staticClass:\"text-blue-600\",attrs:{\"stroke-width\":\"5\",\"stroke-linecap\":\"round\",\"stroke\":\"currentColor\",\"fill\":\"transparent\",\"r\":\"30\",\"cx\":\"40\",\"cy\":\"40\",\"stroke-dasharray\":_vm.progressCircleSvgValue.strokeDasharray,\"stroke-dashoffset\":_vm.progressCircleSvgValue.strokeDashoffset}})]),(_vm.isShowInitPowerButton)?_c('svg',{staticClass:\"h-6 w-6 absolute text-xl text-emerald-700\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\"}},[_c('path',{attrs:{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"d\":\"M13 10V3L4 14h7v7l9-11h-7z\"}})]):_c('span',{staticClass:\"absolute text-xl text-blue-700\"},[_vm._v(\" \"+_vm._s(_vm.progressPercentageString)+\" \")])]),_c('div',{staticClass:\"bg-black h-96 overflow-hidden\",on:{\"click\":_vm.documentHandleClickBox}},[_c('div',{ref:\"screenContainer\"},[_c('div',{attrs:{\"id\":\"screen\"}}),_c('canvas',{staticClass:\"mx-auto\",attrs:{\"id\":\"vga\"}}),_c('div',{attrs:{\"id\":\"virtual-keyboard-caller-box\"}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.virtualKeyboardBlackHole),expression:\"virtualKeyboardBlackHole\"}],ref:\"virtualKeyboardCaller\",attrs:{\"id\":\"virtual-keyboard-caller\",\"autocorrect\":\"off\",\"autocapitalize\":\"none\",\"spellcheck\":\"false\",\"tabindex\":\"0\"},domProps:{\"value\":(_vm.virtualKeyboardBlackHole)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.virtualKeyboardBlackHole=$event.target.value}}})])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isShowInitPowerButton),expression:\"!isShowInitPowerButton\"}],staticClass:\"mt-5 px-3 w-full flex justify-between\"},[_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonPower}},[_vm._v(\" 電源 \")]),_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonPause}},[_vm._v(\" \"+_vm._s(_vm.emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\")+\" \")]),_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonReset}},[_vm._v(\" 重置 \")]),_c('button',{staticClass:\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonCallSmartphoneVirtualKeyboard}},[_vm._v(\" 呼出虛擬鍵盤 \")]),_c('button',{staticClass:\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonFullScreen}},[_vm._v(\" 進入全螢幕 \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      v-show=\"isShowProgressCircle\"\n      @click=\"documentHandleClickButtonInitPower\"\n      class=\"\n        fixed\n        inline-flex\n        items-center\n        justify-center\n        overflow-hidden\n        rounded-full\n        top-0\n        right-12\n        md:right-1/2\n        2xl:right-2\n        bg-white\n        hover:cursor-pointer\n      \"\n    >\n      <svg class=\"w-20 h-20\">\n        <circle\n          class=\"text-gray-300\"\n          stroke-width=\"5\"\n          stroke=\"currentColor\"\n          fill=\"transparent\"\n          r=\"30\"\n          cx=\"40\"\n          cy=\"40\"\n        ></circle>\n        <circle\n          class=\"text-blue-600\"\n          stroke-width=\"5\"\n          stroke-linecap=\"round\"\n          stroke=\"currentColor\"\n          fill=\"transparent\"\n          r=\"30\"\n          cx=\"40\"\n          cy=\"40\"\n          :stroke-dasharray=\"progressCircleSvgValue.strokeDasharray\"\n          :stroke-dashoffset=\"progressCircleSvgValue.strokeDashoffset\"\n        ></circle>\n      </svg>\n      <svg\n        v-if=\"isShowInitPowerButton\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        class=\"h-6 w-6 absolute text-xl text-emerald-700\"\n        fill=\"none\"\n        viewBox=\"0 0 24 24\"\n        stroke=\"currentColor\"\n        stroke-width=\"2\"\n      >\n        <path\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          d=\"M13 10V3L4 14h7v7l9-11h-7z\"\n        />\n      </svg>\n      <span v-else class=\"absolute text-xl text-blue-700\">\n        {{ progressPercentageString }}\n      </span>\n    </div>\n    <div class=\"bg-black h-96 overflow-hidden\" @click=\"documentHandleClickBox\">\n      <div ref=\"screenContainer\">\n        <div id=\"screen\"></div>\n        <canvas id=\"vga\" class=\"mx-auto\"></canvas>\n        <div id=\"virtual-keyboard-caller-box\">\n          <textarea\n            id=\"virtual-keyboard-caller\"\n            ref=\"virtualKeyboardCaller\"\n            v-model=\"virtualKeyboardBlackHole\"\n            autocorrect=\"off\"\n            autocapitalize=\"none\"\n            spellcheck=\"false\"\n            tabindex=\"0\"\n          ></textarea>\n        </div>\n      </div>\n    </div>\n    <div\n      class=\"mt-5 px-3 w-full flex justify-between\"\n      v-show=\"!isShowInitPowerButton\"\n    >\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonPower\"\n      >\n        電源\n      </button>\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonPause\"\n      >\n        {{ emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\" }}\n      </button>\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonReset\"\n      >\n        重置\n      </button>\n      <button\n        class=\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonCallSmartphoneVirtualKeyboard\"\n      >\n        呼出虛擬鍵盤\n      </button>\n      <button\n        class=\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonFullScreen\"\n      >\n        進入全螢幕\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"HomeView\",\n  data: () => ({\n    isPowerPressed: false,\n    isDownloadCompleted: false,\n    progressTicks: -1,\n    emulator: null,\n    emulatorExtendedInfo: {\n      isPaused: false,\n      mouseEnabled: false,\n    },\n    restoreFile: null,\n    virtualKeyboardBlackHole: \" \",\n    systemProfile: {\n      default: {\n        memory_size: 64 * 1024 * 1024,\n        vga_memory_size: 8 * 1024 * 1024,\n        cdrom: {\n          url: \"./machine/system.iso\",\n          size: 23068672,\n        },\n      },\n    },\n  }),\n  watch: {\n    isDownloadCompleted(isCompleted) {\n      if (!isCompleted || !this.isPowerPressed) return;\n      setTimeout(() => {\n        this.machinePowerBoot(this.emulator);\n      }, 500);\n    },\n    virtualKeyboardBlackHole(newValue) {\n      if (newValue === \" \") return;\n      if (newValue === \"\") {\n        const value = 0x00e; // Backspace\n        this.machineSendKeyboardCode(this.emulator, value);\n      } else {\n        const value = newValue.substring(1);\n        this.machineSendKeyboardText(this.emulator, value);\n      }\n      window.requestAnimationFrame(() => {\n        this.virtualKeyboardBlackHole = \" \";\n      });\n    },\n  },\n  computed: {\n    isEmulatorRunning() {\n      if (this.emulatorExtendedInfo.isPaused) return true;\n      return this.emulator && this.emulator.is_running();\n    },\n    isInFullScreen() {\n      return !!document.fullscreenElement;\n    },\n    isShowProgressCircle() {\n      return !this.isPowerPressed || this.progressTicks >= 0;\n    },\n    isShowInitPowerButton() {\n      return (\n        (!this.isDownloadCompleted && !this.isPowerPressed) ||\n        (this.isDownloadCompleted && !this.isEmulatorRunning)\n      );\n    },\n    progressPercentage() {\n      const progressValue = this.progressTicks < 1 ? this.progressTicks : 1;\n      return progressValue * 100;\n    },\n    progressPercentageString() {\n      const value = this.progressPercentage;\n      return `${value.toFixed(0)}%`;\n    },\n    progressCircleSvgValue() {\n      const circumference = 30 * 2 * Math.PI;\n      return {\n        strokeDasharray: circumference,\n        strokeDashoffset:\n          circumference - (this.progressPercentage / 100) * circumference,\n      };\n    },\n    powerPauseText() {\n      return this.emulatorExtendedInfo.isPaused ? \"Resume\" : \"Pause\";\n    },\n    powerResetText() {\n      return \"Reset\";\n    },\n    powerPowerText() {\n      return this.isEmulatorRunning ? \"Power OFF\" : \"Power ON\";\n    },\n    emulatorScreenInfo() {\n      return this.emulator.v86.cpu.devices.vga.stats;\n    },\n    emulatorEventMethods() {\n      return [\n        {\n          name: \"download-progress\",\n          method: (e) => {\n            this.progressTicks = 0;\n\n            if (e.file_name.endsWith(\".wasm\")) {\n              const filenameRaw = e.file_name.split(\"/\");\n              const filename = filenameRaw[filenameRaw.length - 1];\n              this.lucidLog(`Fetching \"${filename}\" ...`);\n              return;\n            }\n\n            if (\n              e.file_index === e.file_count - 1 &&\n              e.loaded >= e.total - 2048\n            ) {\n              this.isDownloadCompleted = true;\n              this.lucidLog(\"Download completed!\");\n              if (!this.isPowerPressed) {\n                this.lucidLog(\"Click power button to start.\");\n              }\n              this.progressTicks = -1;\n              return;\n            }\n\n            if (typeof e.file_index === \"number\" && e.file_count) {\n              this.lucidLog(\n                `Downloading images (${e.file_index + 1}/${e.file_count}) ...`\n              );\n            }\n\n            if (e.total && typeof e.loaded === \"number\") {\n              this.progressTicks = e.loaded / e.total;\n            } else {\n              this.lucidLog(`Progress: ${this.progressTicks++ % 50}`);\n            }\n          },\n        },\n        {\n          name: \"download-error\",\n          method: (e) => {\n            this.progressTicks = 0;\n            this.progressState = `\n              Error: Loading \"${e.file_name}\" failed.\n              Check your connection and reload the page to try again later.\n            `;\n          },\n        },\n        {\n          name: \"mouse-enable\",\n          method: (isEnabled) => {\n            this.emulatorExtendedInfo.mouseEnabled = isEnabled;\n          },\n        },\n        {\n          name: \"screen-set-mode\",\n          method: () => {\n            this.documentHandleResizeScreen();\n          },\n        },\n        {\n          name: \"screen-set-size-graphical\",\n          method: () => {\n            this.documentHandleResizeScreen();\n          },\n        },\n        {\n          name: \"emulator-stopped\",\n          method: () => {\n            if (!this.isInFullScreen) return;\n            this.documentRequestExitFullScreen();\n          },\n        },\n      ];\n    },\n  },\n  methods: {\n    lucidLog(message) {\n      console.log(`[Lucid] ${message}`);\n    },\n    machineSetup(baseProfile) {\n      const system = { ...baseProfile };\n      // Setup WASM\n      system.wasm_path = \"./v86.wasm\";\n      // Setup BIOS\n      system.bios = {\n        url: \"./machine/bios/seabios.bin\",\n      };\n      system.vga_bios = {\n        url: \"./machine/bios/vgabios.bin\",\n      };\n      // Setup Network Relay\n      system.network_relay_url =\n        system.network_relay_url || \"wss://relay.widgetry.org/\";\n      // Setup Screen Container\n      system.screen_container = this.$refs.screenContainer;\n      // Mount Machine\n      const V86Starter = window.V86Starter;\n      this.emulator = new V86Starter(system);\n      // Return Machine\n      return this.emulator;\n    },\n    machineSetupEventListener(machine) {\n      for (const e of this.emulatorEventMethods) {\n        machine.add_listener(e.name, e.method);\n      }\n    },\n    machineScreenSetScale(machine, scale) {\n      machine.screen_set_scale(scale);\n    },\n    async machineStateSave(machine) {\n      // Save the state of the machine\n      const state = await machine.save_state();\n      const stateObject = new Blob([state]);\n      // Create virtual download link\n      const a = document.createElement(\"a\");\n      a.download = `lucid-state.bin`;\n      a.href = window.URL.createObjectURL(stateObject);\n      a.dataset.downloadurl = `application/octet-stream:${a.download}:${a.href}`;\n      // Trigger virtual download link\n      a.click();\n    },\n    machineStateRestore(machine, file) {\n      machine.stop();\n\n      const filereader = new FileReader();\n\n      filereader.onload = (e) => {\n        machine.restore_state(e.target.result);\n        machine.run();\n      };\n\n      filereader.readAsArrayBuffer(file);\n    },\n    machinePowerBoot(machine) {\n      this.isPowerPressed = true;\n      if (!this.isDownloadCompleted) return;\n      if (this.isEmulatorRunning) {\n        machine.stop();\n        machine.restart();\n      } else {\n        machine.run();\n      }\n    },\n    machineSendKeyboardText(machine, text) {\n      machine.keyboard_send_text(text);\n    },\n    machineSendKeyboardCode(machine, code) {\n      machine.bus.send(\"keyboard-code\", code);\n    },\n    machinePowerPause(machine) {\n      if (this.emulatorExtendedInfo.isPaused) {\n        machine.run();\n        this.emulatorExtendedInfo.isPaused = false;\n      } else {\n        machine.stop();\n        this.emulatorExtendedInfo.isPaused = true;\n      }\n    },\n    machinePowerReset(machine) {\n      machine.restart();\n    },\n    documentLockMouse() {\n      const body = document.body;\n      const method =\n        body.requestPointerLock ||\n        body.mozRequestPointerLock ||\n        body.webkitRequestPointerLock ||\n        body.msRequestPointerLock;\n      if (method) {\n        method.call(body);\n      } else {\n        console.warn(\"The browser is not support requestPointerLock\");\n      }\n    },\n    documentRequestFullScreen() {\n      const element = this.$refs.screenContainer;\n      const method =\n        element.requestFullscreen ||\n        element.mozRequestFullScreen ||\n        element.webkitRequestFullscreen ||\n        element.msRequestFullscreen;\n      if (method) {\n        method.call(element);\n      } else {\n        console.warn(\"The browser is not support requestFullscreen\");\n      }\n    },\n    documentRequestExitFullScreen() {\n      const method =\n        document.exitFullscreen ||\n        document.mozCancelFullScreen ||\n        document.webkitExitFullscreen ||\n        document.msExitFullscreen;\n      if (method) {\n        method.call(document);\n      } else {\n        console.warn(\"The browser is not support exitFullscreen\");\n      }\n    },\n    documentHandleResizeScreen() {\n      if (!this.isEmulatorRunning) return;\n      if (!this.emulatorScreenInfo.is_graphical) {\n        this.machineScreenSetScale(this.emulator, 1);\n      }\n      const documentScreen = {\n        width: this.$refs.screenContainer.clientWidth || 1,\n        height: this.$refs.screenContainer.clientHeight || 1,\n      };\n      const emulatorScreen = {\n        width: this.emulatorScreenInfo.res_x || 1,\n        height: this.emulatorScreenInfo.res_y || 1,\n      };\n      const widthScale = documentScreen.width / emulatorScreen.width;\n      const heightScale = documentScreen.height / emulatorScreen.height;\n      const scale = Math.min(widthScale, heightScale);\n      this.machineScreenSetScale(this.emulator, scale);\n    },\n    documentHandleChangeRestoreFile(e) {\n      this.restoreFile = e.target.files[0];\n    },\n    documentHandleClickBox() {\n      if (this.emulatorExtendedInfo.mouseEnabled) {\n        this.documentLockMouse();\n      }\n    },\n    documentHandleClickButtonInitPower() {\n      if (this.isPowerPressed) return;\n      this.machinePowerBoot(this.emulator);\n    },\n    documentHandleClickButtonPower() {\n      this.machinePowerBoot(this.emulator);\n    },\n    documentHandleClickButtonPause() {\n      this.machinePowerPause(this.emulator);\n    },\n    documentHandleClickButtonReset() {\n      this.machinePowerReset(this.emulator);\n    },\n    documentHandleClickButtonFullScreen() {\n      this.documentRequestFullScreen();\n    },\n    documentHandleClickButtonCallSmartphoneVirtualKeyboard() {\n      this.$refs.virtualKeyboardCaller.focus();\n    },\n  },\n  created() {\n    window.addEventListener(\"resize\", this.documentHandleResizeScreen);\n  },\n  destroyed() {\n    window.removeEventListener(\"resize\", this.documentHandleResizeScreen);\n  },\n  mounted() {\n    this.documentHandleResizeScreen();\n    const params = new URLSearchParams(window.location.search);\n    const profileName = params.get(\"profile\");\n    const baseProfile =\n      this.systemProfile[profileName] || this.systemProfile.default;\n    if (params.get(\"network_relay_url\")) {\n      baseProfile.network_relay_url = params.get(\"network_relay_url\");\n    }\n    const machine = this.machineSetup(baseProfile);\n    this.machineSetupEventListener(machine);\n  },\n};\n</script>\n\n<style scoped>\n#virtual-keyboard-caller-box {\n  position: absolute;\n  top: 0;\n  z-index: 10;\n}\n\n#virtual-keyboard-caller {\n  width: 0;\n  height: 0;\n  resize: none;\n  position: absolute;\n  opacity: 0;\n  left: -9999em;\n  top: 0;\n  z-index: -10;\n  white-space: nowrap;\n  overflow: hidden;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomeView.vue?vue&type=template&id=cff781e4&scoped=true&\"\nimport script from \"./HomeView.vue?vue&type=script&lang=js&\"\nexport * from \"./HomeView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HomeView.vue?vue&type=style&index=0&id=cff781e4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cff781e4\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","on","documentHandleClickButtonInitPower","attrs","progressCircleSvgValue","strokeDasharray","strokeDashoffset","_v","_s","progressPercentageString","documentHandleClickBox","ref","domProps","$event","target","composing","virtualKeyboardBlackHole","isShowInitPowerButton","documentHandleClickButtonPower","documentHandleClickButtonPause","emulatorExtendedInfo","isPaused","documentHandleClickButtonReset","documentHandleClickButtonCallSmartphoneVirtualKeyboard","documentHandleClickButtonFullScreen","staticRenderFns","data","isPowerPressed","isDownloadCompleted","progressTicks","emulator","mouseEnabled","restoreFile","systemProfile","default","memory_size","vga_memory_size","cdrom","url","size","watch","isCompleted","setTimeout","machinePowerBoot","newValue","machineSendKeyboardCode","substring","machineSendKeyboardText","window","requestAnimationFrame","computed","isEmulatorRunning","is_running","isInFullScreen","document","fullscreenElement","isShowProgressCircle","progressPercentage","progressValue","toFixed","circumference","Math","PI","powerPauseText","powerResetText","powerPowerText","emulatorScreenInfo","v86","cpu","devices","vga","stats","emulatorEventMethods","method","e","file_name","methods","lucidLog","message","console","log","machineSetup","baseProfile","system","wasm_path","bios","vga_bios","network_relay_url","screen_container","$refs","screenContainer","V86Starter","machineSetupEventListener","machine","add_listener","machineScreenSetScale","scale","screen_set_scale","async","state","save_state","stateObject","Blob","a","createElement","download","href","URL","createObjectURL","dataset","downloadurl","click","machineStateRestore","file","stop","filereader","FileReader","onload","restore_state","result","run","readAsArrayBuffer","restart","text","keyboard_send_text","code","bus","send","machinePowerPause","machinePowerReset","documentLockMouse","body","call","warn","documentRequestFullScreen","element","documentRequestExitFullScreen","documentHandleResizeScreen","is_graphical","documentScreen","width","clientWidth","height","clientHeight","emulatorScreen","res_x","res_y","widthScale","heightScale","min","documentHandleChangeRestoreFile","files","virtualKeyboardCaller","focus","created","addEventListener","destroyed","removeEventListener","mounted","params","URLSearchParams","location","search","profileName","get","component"],"sourceRoot":""}