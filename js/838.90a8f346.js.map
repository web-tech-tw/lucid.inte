{"version":3,"file":"js/838.90a8f346.js","mappings":"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","sources":["webpack://lucid.inte/./src/views/HomeView.vue?710a","webpack://lucid.inte/src/views/HomeView.vue","webpack://lucid.inte/./src/views/HomeView.vue?4768","webpack://lucid.inte/./src/views/HomeView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowProgressCircle),expression:\"isShowProgressCircle\"}],staticClass:\"\\n      fixed\\n      inline-flex\\n      items-center\\n      justify-center\\n      overflow-hidden\\n      rounded-full\\n      top-0\\n      right-12\\n      md:right-1/2\\n      2xl:right-2\\n      bg-white\\n      hover:cursor-pointer\\n    \",on:{\"click\":_vm.documentHandleClickButtonPower}},[_c('svg',{staticClass:\"w-20 h-20\"},[_c('circle',{staticClass:\"text-gray-300\",attrs:{\"stroke-width\":\"5\",\"stroke\":\"currentColor\",\"fill\":\"transparent\",\"r\":\"30\",\"cx\":\"40\",\"cy\":\"40\"}}),_c('circle',{staticClass:\"text-blue-600\",attrs:{\"stroke-width\":\"5\",\"stroke-linecap\":\"round\",\"stroke\":\"currentColor\",\"fill\":\"transparent\",\"r\":\"30\",\"cx\":\"40\",\"cy\":\"40\",\"stroke-dasharray\":_vm.progressCircleSvgValue.strokeDasharray,\"stroke-dashoffset\":_vm.progressCircleSvgValue.strokeDashoffset}})]),(_vm.isShowInitPowerButton)?_c('svg',{staticClass:\"h-6 w-6 absolute text-xl text-emerald-700\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\"}},[_c('path',{attrs:{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"d\":\"M13 10V3L4 14h7v7l9-11h-7z\"}})]):_c('span',{staticClass:\"absolute text-xl text-blue-700\"},[_vm._v(\" \"+_vm._s(_vm.progressPercentageString)+\" \")])]),_c('div',{staticClass:\"bg-black h-96 overflow-hidden\",on:{\"click\":_vm.documentHandleClickBox}},[_c('div',{ref:\"screenContainer\"},[_c('div',{attrs:{\"id\":\"screen\"}}),_c('canvas',{staticClass:\"mx-auto\",attrs:{\"id\":\"vga\"}})])]),(_vm.isEmulatorRunning)?_c('div',{staticClass:\"mt-5 px-3 w-full flex justify-between\"},[_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonPower}},[_vm._v(\" 電源 \")]),_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonPause}},[_vm._v(\" \"+_vm._s(_vm.emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\")+\" \")]),_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonReset}},[_vm._v(\" 重置 \")]),_c('button',{staticClass:\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonFullScreen}},[_vm._v(\" 進入全螢幕 \")])]):_vm._e(),_c('div',{staticClass:\"mt-5 px-3 w-full flex justify-center\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.virtualKeyboardBlackHole),expression:\"virtualKeyboardBlackHole\"}],staticClass:\"rounded-md resize-none border-2 text-center\",attrs:{\"placeholder\":\"虛擬鍵盤呼出器\"},domProps:{\"value\":(_vm.virtualKeyboardBlackHole)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.virtualKeyboardBlackHole=$event.target.value}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      v-show=\"isShowProgressCircle\"\n      @click=\"documentHandleClickButtonPower\"\n      class=\"\n        fixed\n        inline-flex\n        items-center\n        justify-center\n        overflow-hidden\n        rounded-full\n        top-0\n        right-12\n        md:right-1/2\n        2xl:right-2\n        bg-white\n        hover:cursor-pointer\n      \"\n    >\n      <svg class=\"w-20 h-20\">\n        <circle\n          class=\"text-gray-300\"\n          stroke-width=\"5\"\n          stroke=\"currentColor\"\n          fill=\"transparent\"\n          r=\"30\"\n          cx=\"40\"\n          cy=\"40\"\n        ></circle>\n        <circle\n          class=\"text-blue-600\"\n          stroke-width=\"5\"\n          stroke-linecap=\"round\"\n          stroke=\"currentColor\"\n          fill=\"transparent\"\n          r=\"30\"\n          cx=\"40\"\n          cy=\"40\"\n          :stroke-dasharray=\"progressCircleSvgValue.strokeDasharray\"\n          :stroke-dashoffset=\"progressCircleSvgValue.strokeDashoffset\"\n        ></circle>\n      </svg>\n      <svg\n        v-if=\"isShowInitPowerButton\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        class=\"h-6 w-6 absolute text-xl text-emerald-700\"\n        fill=\"none\"\n        viewBox=\"0 0 24 24\"\n        stroke=\"currentColor\"\n        stroke-width=\"2\"\n      >\n        <path\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          d=\"M13 10V3L4 14h7v7l9-11h-7z\"\n        />\n      </svg>\n      <span v-else class=\"absolute text-xl text-blue-700\">\n        {{ progressPercentageString }}\n      </span>\n    </div>\n    <div class=\"bg-black h-96 overflow-hidden\" @click=\"documentHandleClickBox\">\n      <div ref=\"screenContainer\">\n        <div id=\"screen\"></div>\n        <canvas id=\"vga\" class=\"mx-auto\"></canvas>\n      </div>\n    </div>\n    <div class=\"mt-5 px-3 w-full flex justify-between\" v-if=\"isEmulatorRunning\">\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonPower\"\n      >\n        電源\n      </button>\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonPause\"\n      >\n        {{ emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\" }}\n      </button>\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonReset\"\n      >\n        重置\n      </button>\n      <button\n        class=\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonFullScreen\"\n      >\n        進入全螢幕\n      </button>\n    </div>\n    <div class=\"mt-5 px-3 w-full flex justify-center\">\n      <textarea\n        v-model=\"virtualKeyboardBlackHole\"\n        class=\"rounded-md resize-none border-2 text-center\"\n        placeholder=\"虛擬鍵盤呼出器\"\n      ></textarea>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"HomeView\",\n  data: () => ({\n    isPowerPressed: false,\n    isDownloadCompleted: false,\n    isShowOptionsMenu: false,\n    isShowRestoreModal: false,\n    progressTicks: -1,\n    emulator: null,\n    emulatorExtendedInfo: {\n      isPaused: false,\n      mouseEnabled: false,\n    },\n    restoreFile: null,\n    virtualKeyboardBlackHole: \" \",\n    systemProfile: {\n      default: {\n        memory_size: 64 * 1024 * 1024,\n        vga_memory_size: 8 * 1024 * 1024,\n        cdrom: {\n          url: \"./machine/system.iso\",\n          size: 23068672,\n        },\n      },\n    },\n  }),\n  watch: {\n    isDownloadCompleted(isCompleted) {\n      if (!isCompleted || !this.isPowerPressed) return;\n      setTimeout(() => {\n        this.machinePowerBoot(this.emulator);\n      }, 500);\n    },\n    virtualKeyboardBlackHole(newValue) {\n      if (newValue === \" \") return;\n      if (newValue === \"\") {\n        const value = 0x00e; // Backspace\n        this.machineSendKeyboardCode(this.emulator, value);\n      } else {\n        const value = newValue.substring(1);\n        this.machineSendKeyboardText(this.emulator, value);\n      }\n      window.requestAnimationFrame(() => {\n        this.virtualKeyboardBlackHole = \" \";\n      });\n    },\n  },\n  computed: {\n    isEmulatorRunning() {\n      if (this.emulatorExtendedInfo.isPaused) return true;\n      return this.emulator && this.emulator.is_running();\n    },\n    isInFullScreen() {\n      return !!document.fullscreenElement;\n    },\n    isShowProgressCircle() {\n      return !this.isPowerPressed || this.progressTicks >= 0;\n    },\n    isShowInitPowerButton() {\n      return (\n        (!this.isDownloadCompleted && !this.isPowerPressed) ||\n        (this.isDownloadCompleted && !this.isEmulatorRunning)\n      );\n    },\n    isShowModal() {\n      return this.isShowRestoreModal;\n    },\n    progressPercentage() {\n      const progressValue = this.progressTicks < 1 ? this.progressTicks : 1;\n      return progressValue * 100;\n    },\n    progressPercentageString() {\n      const value = this.progressPercentage;\n      return `${value.toFixed(0)}%`;\n    },\n    progressCircleSvgValue() {\n      const circumference = 30 * 2 * Math.PI;\n      return {\n        strokeDasharray: circumference,\n        strokeDashoffset:\n          circumference - (this.progressPercentage / 100) * circumference,\n      };\n    },\n    powerPauseText() {\n      return this.emulatorExtendedInfo.isPaused ? \"Resume\" : \"Pause\";\n    },\n    powerResetText() {\n      return \"Reset\";\n    },\n    powerPowerText() {\n      return this.isEmulatorRunning ? \"Power OFF\" : \"Power ON\";\n    },\n    emulatorScreenInfo() {\n      return this.emulator.v86.cpu.devices.vga.stats;\n    },\n    emulatorEventMethods() {\n      return [\n        {\n          name: \"download-progress\",\n          method: (e) => {\n            this.progressTicks = 0;\n\n            if (e.file_name.endsWith(\".wasm\")) {\n              const filenameRaw = e.file_name.split(\"/\");\n              const filename = filenameRaw[filenameRaw.length - 1];\n              this.lucidLog(`Fetching \"${filename}\" ...`);\n              return;\n            }\n\n            if (\n              e.file_index === e.file_count - 1 &&\n              e.loaded >= e.total - 2048\n            ) {\n              this.isDownloadCompleted = true;\n              this.lucidLog(\"Download completed!\");\n              if (!this.isPowerPressed) {\n                this.lucidLog(\"Click power button to start.\");\n              }\n              this.progressTicks = -1;\n              return;\n            }\n\n            if (typeof e.file_index === \"number\" && e.file_count) {\n              this.lucidLog(\n                `Downloading images (${e.file_index + 1}/${e.file_count}) ...`\n              );\n            }\n\n            if (e.total && typeof e.loaded === \"number\") {\n              this.progressTicks = e.loaded / e.total;\n            } else {\n              this.lucidLog(`Progress: ${this.progressTicks++ % 50}`);\n            }\n          },\n        },\n        {\n          name: \"download-error\",\n          method: (e) => {\n            this.progressTicks = 0;\n            this.progressState = `\n              Error: Loading \"${e.file_name}\" failed.\n              Check your connection and reload the page to try again later.\n            `;\n          },\n        },\n        {\n          name: \"mouse-enable\",\n          method: (isEnabled) => {\n            this.emulatorExtendedInfo.mouseEnabled = isEnabled;\n          },\n        },\n        {\n          name: \"screen-set-mode\",\n          method: () => {\n            this.documentHandleResizeScreen();\n          },\n        },\n        {\n          name: \"screen-set-size-graphical\",\n          method: () => {\n            this.documentHandleResizeScreen();\n          },\n        },\n        {\n          name: \"emulator-stopped\",\n          method: () => {\n            if (!this.isInFullScreen) return;\n            this.documentRequestExitFullScreen();\n          },\n        },\n      ];\n    },\n  },\n  methods: {\n    lucidLog(message) {\n      console.log(`[Lucid] ${message}`);\n    },\n    machineSetup(baseProfile) {\n      const system = { ...baseProfile };\n      // Setup WASM\n      system.wasm_path = \"./v86.wasm\";\n      // Setup BIOS\n      system.bios = {\n        url: \"./machine/bios/seabios.bin\",\n      };\n      system.vga_bios = {\n        url: \"./machine/bios/vgabios.bin\",\n      };\n      // Setup Network Relay\n      system.network_relay_url =\n        system.network_relay_url || \"wss://relay.widgetry.org/\";\n      // Setup Screen Container\n      system.screen_container = this.$refs.screenContainer;\n      // Mount Machine\n      const V86Starter = window.V86Starter;\n      this.emulator = new V86Starter(system);\n      // Return Machine\n      return this.emulator;\n    },\n    machineSetupEventListener(machine) {\n      for (const e of this.emulatorEventMethods) {\n        machine.add_listener(e.name, e.method);\n      }\n    },\n    machineScreenSetScale(machine, scale) {\n      machine.screen_set_scale(scale);\n    },\n    async machineStateSave(machine) {\n      // Save the state of the machine\n      const state = await machine.save_state();\n      const stateObject = new Blob([state]);\n      // Create virtual download link\n      const a = document.createElement(\"a\");\n      a.download = `lucid-state.bin`;\n      a.href = window.URL.createObjectURL(stateObject);\n      a.dataset.downloadurl = `application/octet-stream:${a.download}:${a.href}`;\n      // Trigger virtual download link\n      a.click();\n    },\n    machineStateRestore(machine, file) {\n      machine.stop();\n\n      const filereader = new FileReader();\n\n      filereader.onload = (e) => {\n        machine.restore_state(e.target.result);\n        machine.run();\n      };\n\n      filereader.readAsArrayBuffer(file);\n    },\n    machinePowerBoot(machine) {\n      this.isPowerPressed = true;\n      if (!this.isDownloadCompleted) return;\n      if (this.isEmulatorRunning) {\n        machine.stop();\n        machine.restart();\n      } else {\n        machine.run();\n      }\n    },\n    machineSendKeyboardText(machine, text) {\n      machine.keyboard_send_text(text);\n    },\n    machineSendKeyboardCode(machine, code) {\n      machine.bus.send(\"keyboard-code\", code);\n    },\n    machinePowerPause(machine) {\n      if (this.emulatorExtendedInfo.isPaused) {\n        machine.run();\n        this.emulatorExtendedInfo.isPaused = false;\n      } else {\n        machine.stop();\n        this.emulatorExtendedInfo.isPaused = true;\n      }\n    },\n    machinePowerReset(machine) {\n      machine.restart();\n    },\n    documentLockMouse() {\n      const body = document.body;\n      const method =\n        body.requestPointerLock ||\n        body.mozRequestPointerLock ||\n        body.webkitRequestPointerLock ||\n        body.msRequestPointerLock;\n      if (method) {\n        method.call(body);\n      } else {\n        console.warn(\"The browser is not support requestPointerLock\");\n      }\n    },\n    documentRequestFullScreen() {\n      const element = this.$refs.screenContainer;\n      const method =\n        element.requestFullscreen ||\n        element.mozRequestFullScreen ||\n        element.webkitRequestFullscreen ||\n        element.msRequestFullscreen;\n      if (method) {\n        method.call(element);\n      } else {\n        console.warn(\"The browser is not support requestFullscreen\");\n      }\n    },\n    documentRequestExitFullScreen() {\n      const method =\n        document.exitFullscreen ||\n        document.mozCancelFullScreen ||\n        document.webkitExitFullscreen ||\n        document.msExitFullscreen;\n      if (method) {\n        method.call(document);\n      } else {\n        console.warn(\"The browser is not support exitFullscreen\");\n      }\n    },\n    documentHandleResizeScreen() {\n      if (!this.isEmulatorRunning) return;\n      if (!this.emulatorScreenInfo.is_graphical) {\n        this.machineScreenSetScale(this.emulator, 1);\n      }\n      const documentScreen = {\n        width: this.$refs.screenContainer.clientWidth || 1,\n        height: this.$refs.screenContainer.clientHeight || 1,\n      };\n      const emulatorScreen = {\n        width: this.emulatorScreenInfo.res_x || 1,\n        height: this.emulatorScreenInfo.res_y || 1,\n      };\n      const widthScale = documentScreen.width / emulatorScreen.width;\n      const heightScale = documentScreen.height / emulatorScreen.height;\n      const scale = Math.min(widthScale, heightScale);\n      this.machineScreenSetScale(this.emulator, scale);\n    },\n    documentHandleChangeRestoreFile(e) {\n      this.restoreFile = e.target.files[0];\n    },\n    documentHandleClickBox() {\n      if (this.emulatorExtendedInfo.mouseEnabled) {\n        this.documentLockMouse();\n      }\n    },\n    documentHandleClickButtonPower() {\n      this.machinePowerBoot(this.emulator);\n    },\n    documentHandleClickButtonPause() {\n      this.machinePowerPause(this.emulator);\n    },\n    documentHandleClickButtonReset() {\n      this.machinePowerReset(this.emulator);\n    },\n    documentHandleClickButtonFullScreen() {\n      this.documentRequestFullScreen();\n    },\n    documentHandleClickButtonOptions() {\n      this.isShowOptionsMenu = !this.isShowOptionsMenu;\n    },\n    documentHandleClickButtonOptionsCallSmartphoneVirtualKeyboard() {\n      this.$refs.virtualKeyboardCaller.focus();\n      this.isShowOptionsMenu = false;\n    },\n    documentHandleClickButtonOptionsRestore() {\n      if (!this.emulatorExtendedInfo.isPaused) {\n        this.machinePowerPause(this.emulator);\n      }\n      this.isShowRestoreModal = true;\n      this.isShowOptionsMenu = false;\n    },\n    documentHandleClickButtonOptionsSave() {\n      this.machineStateSave(this.emulator);\n      this.isShowOptionsMenu = false;\n    },\n    documentHandleClickButtonRestoreCancel() {\n      if (this.emulatorExtendedInfo.isPaused) {\n        this.machinePowerPause(this.emulator);\n      }\n      this.restoreFile = null;\n      this.isShowRestoreModal = false;\n    },\n    documentHandleClickButtonRestoreImport() {\n      if (this.emulatorExtendedInfo.isPaused) {\n        this.machinePowerPause(this.emulator);\n      }\n      this.machineStateRestore(this.emulator, this.restoreFile);\n      this.isShowRestoreModal = false;\n    },\n  },\n  created() {\n    window.addEventListener(\"resize\", this.documentHandleResizeScreen);\n  },\n  destroyed() {\n    window.removeEventListener(\"resize\", this.documentHandleResizeScreen);\n  },\n  mounted() {\n    this.documentHandleResizeScreen();\n    const params = new URLSearchParams(window.location.search);\n    const profileName = params.get(\"profile\");\n    const baseProfile =\n      this.systemProfile[profileName] || this.systemProfile.default;\n    if (params.get(\"network_relay_url\")) {\n      baseProfile.network_relay_url = params.get(\"network_relay_url\");\n    }\n    const machine = this.machineSetup(baseProfile);\n    this.machineSetupEventListener(machine);\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomeView.vue?vue&type=template&id=30a0bfe2&\"\nimport script from \"./HomeView.vue?vue&type=script&lang=js&\"\nexport * from \"./HomeView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","on","documentHandleClickButtonPower","attrs","progressCircleSvgValue","strokeDasharray","strokeDashoffset","_v","_s","progressPercentageString","documentHandleClickBox","ref","documentHandleClickButtonPause","emulatorExtendedInfo","isPaused","documentHandleClickButtonReset","documentHandleClickButtonFullScreen","_e","domProps","$event","target","composing","virtualKeyboardBlackHole","staticRenderFns","data","isPowerPressed","isDownloadCompleted","isShowOptionsMenu","isShowRestoreModal","progressTicks","emulator","mouseEnabled","restoreFile","systemProfile","default","memory_size","vga_memory_size","cdrom","url","size","watch","isCompleted","setTimeout","machinePowerBoot","newValue","machineSendKeyboardCode","substring","machineSendKeyboardText","window","requestAnimationFrame","computed","isEmulatorRunning","is_running","isInFullScreen","document","fullscreenElement","isShowProgressCircle","isShowInitPowerButton","isShowModal","progressPercentage","progressValue","toFixed","circumference","Math","PI","powerPauseText","powerResetText","powerPowerText","emulatorScreenInfo","v86","cpu","devices","vga","stats","emulatorEventMethods","method","e","file_name","methods","lucidLog","message","console","log","machineSetup","baseProfile","system","wasm_path","bios","vga_bios","network_relay_url","screen_container","$refs","screenContainer","V86Starter","machineSetupEventListener","machine","add_listener","machineScreenSetScale","scale","screen_set_scale","async","state","save_state","stateObject","Blob","a","createElement","download","href","URL","createObjectURL","dataset","downloadurl","click","machineStateRestore","file","stop","filereader","FileReader","onload","restore_state","result","run","readAsArrayBuffer","restart","text","keyboard_send_text","code","bus","send","machinePowerPause","machinePowerReset","documentLockMouse","body","call","warn","documentRequestFullScreen","element","documentRequestExitFullScreen","documentHandleResizeScreen","is_graphical","documentScreen","width","clientWidth","height","clientHeight","emulatorScreen","res_x","res_y","widthScale","heightScale","min","documentHandleChangeRestoreFile","files","documentHandleClickButtonOptions","documentHandleClickButtonOptionsCallSmartphoneVirtualKeyboard","virtualKeyboardCaller","focus","documentHandleClickButtonOptionsRestore","documentHandleClickButtonOptionsSave","machineStateSave","documentHandleClickButtonRestoreCancel","documentHandleClickButtonRestoreImport","created","addEventListener","destroyed","removeEventListener","mounted","params","URLSearchParams","location","search","profileName","get","component"],"sourceRoot":""}