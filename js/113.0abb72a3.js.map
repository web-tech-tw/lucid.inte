{"version":3,"file":"js/113.0abb72a3.js","mappings":"gKAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,wCAAwCC,GAAG,CAAC,MAAQP,EAAIQ,yBAAyB,CAACJ,EAAG,MAAM,CAACK,IAAI,mBAAmB,CAACL,EAAG,MAAM,CAACM,MAAM,CAAC,GAAK,YAAYN,EAAG,SAAS,CAACE,YAAY,UAAUI,MAAM,CAAC,GAAK,aAAaN,EAAG,MAAM,CAACE,YAAY,yCAAyC,CAACF,EAAG,SAAS,CAACE,YAAY,+DAA+DC,GAAG,CAAC,MAAQP,EAAIW,iCAAiC,CAACX,EAAIY,GAAG,IAAIZ,EAAIa,GAAGb,EAAIc,qBAAqBC,SAAW,KAAO,MAAM,OAAOX,EAAG,SAAS,CAACE,YAAY,+DAA+DC,GAAG,CAAC,MAAQP,EAAIgB,sCAAsC,CAAChB,EAAIY,GAAG,aAAaR,EAAG,SAAS,CAACE,YAAY,+DAA+DC,GAAG,CAAC,MAAQP,EAAIiB,iCAAiC,CAACjB,EAAIY,GAAG,eACt5BM,EAAkB,GCkCtB,GACEC,KAAM,WACNC,KAAM,KAAM,CACVC,SAAU,KACVP,qBAAsB,CACpBC,UAAU,EACVO,cAAc,KAGlBC,SAAU,CACRC,uBACE,MAAO,CACb,CACQ,KAARL,eACQ,OAARM,IACU,KAAV,sCAGA,CACQ,KAARN,mBACQ,OAARM,KACU,KAAV,qCAMEC,QAAS,CACPC,cAEE,MAAMC,EAAS,CACbC,UAAW,aACXC,YAAa,UACbC,gBAAiB,QACjBC,MAAO,CACLC,IAAK,uBACLC,KAAM,UAERC,KAAM,CACJF,IAAK,8BAEPG,SAAU,CACRH,IAAK,8BAEPI,kBAAmB,4BACnBC,iBAAkBrC,KAAKsC,MAAMC,gBAC7BC,WAAW,GAGPC,EAAaC,OAAOD,WAG1B,OAFAzC,KAAKoB,SAAW,IAAIqB,EAAWd,GAExB3B,KAAKoB,UAEduB,0BAA0BC,GACxB,IAAK,MAAMC,KAAK7C,KAAKuB,qBACnBqB,EAAQE,aAAaD,EAAE3B,KAAM2B,EAAErB,SAGnCuB,kBAAkBH,GACX5C,KAAKa,qBAAqBC,UAI7B8B,EAAQI,MACRhD,KAAKa,qBAAqBC,UAAW,IAJrC8B,EAAQK,OACRjD,KAAKa,qBAAqBC,UAAW,IAMzCoC,kBAAkBN,GAChBA,EAAQO,WAEVC,oBACE,MAAMC,EAAOC,SAASD,KAChB7B,EACZ6B,EAAAA,oBACAA,EAAAA,uBACAA,EAAAA,0BACAA,EAAAA,qBACU7B,EACFA,EAAO+B,KAAKF,GAEZG,QAAQC,KAAK,kDAGjBC,4BACE,MAAMC,EAAU3D,KAAKsC,MAAMC,gBACrBf,EACZmC,EAAAA,mBACAA,EAAAA,sBACAA,EAAAA,yBACAA,EAAAA,oBACUnC,EACFA,EAAO+B,KAAKI,GAEZH,QAAQC,KAAK,iDAGjBG,gCACE,MAAMpC,EACZ8B,SAAAA,gBACAA,SAAAA,qBACAA,SAAAA,sBACAA,SAAAA,iBACU9B,EACFA,EAAO+B,KAAKD,UAEZE,QAAQC,KAAK,8CAGjBlD,yBACMP,KAAKa,qBAAqBQ,cAC5BrB,KAAKoD,qBAGT1C,iCACEV,KAAK+C,kBAAkB/C,KAAKoB,WAE9BJ,iCACEhB,KAAKkD,kBAAkBlD,KAAKoB,WAE9BL,sCACEf,KAAK0D,8BAGTG,UACE,MAAMjB,EAAU5C,KAAK0B,cACrB1B,KAAK2C,0BAA0BC,KCjKiO,I,UCOhQkB,GAAY,OACd,EACAhE,EACAmB,GACA,EACA,KACA,KACA,MAIF,EAAe6C,EAAiB","sources":["webpack://lucid.inte/./src/views/HomeView.vue?3921","webpack://lucid.inte/src/views/HomeView.vue","webpack://lucid.inte/./src/views/HomeView.vue?4768","webpack://lucid.inte/./src/views/HomeView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"bg-black min-h-screen overflow-hidden\",on:{\"click\":_vm.documentHandleClickBox}},[_c('div',{ref:\"screenContainer\"},[_c('div',{attrs:{\"id\":\"screen\"}}),_c('canvas',{staticClass:\"mx-auto\",attrs:{\"id\":\"vga\"}})])]),_c('div',{staticClass:\"mt-5 px-3 w-full flex justify-between\"},[_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonPause}},[_vm._v(\" \"+_vm._s(_vm.emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\")+\" \")]),_c('button',{staticClass:\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonFullScreen}},[_vm._v(\" 進入全螢幕 \")]),_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonReset}},[_vm._v(\" 重置 \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      class=\"bg-black min-h-screen overflow-hidden\"\n      @click=\"documentHandleClickBox\"\n    >\n      <div ref=\"screenContainer\">\n        <div id=\"screen\"></div>\n        <canvas id=\"vga\" class=\"mx-auto\"></canvas>\n      </div>\n    </div>\n    <div class=\"mt-5 px-3 w-full flex justify-between\">\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonPause\"\n      >\n        {{ emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\" }}\n      </button>\n      <button\n        class=\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonFullScreen\"\n      >\n        進入全螢幕\n      </button>\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonReset\"\n      >\n        重置\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"HomeView\",\n  data: () => ({\n    emulator: null,\n    emulatorExtendedInfo: {\n      isPaused: false,\n      mouseEnabled: false,\n    },\n  }),\n  computed: {\n    emulatorEventMethods() {\n      return [\n        {\n          name: \"mouse-enable\",\n          method: (isEnabled) => {\n            this.emulatorExtendedInfo.mouseEnabled = isEnabled;\n          },\n        },\n        {\n          name: \"emulator-stopped\",\n          method: () => {\n            this.documentRequestExitFullScreen();\n          },\n        },\n      ];\n    },\n  },\n  methods: {\n    machineBoot() {\n      // Define Config\n      const config = {\n        wasm_path: \"./v86.wasm\",\n        memory_size: 256 * 1024 * 1024,\n        vga_memory_size: 8 * 1024 * 1024,\n        cdrom: {\n          url: \"./machine/system.iso\",\n          size: 56379392,\n        },\n        bios: {\n          url: \"./machine/bios/seabios.bin\",\n        },\n        vga_bios: {\n          url: \"./machine/bios/vgabios.bin\",\n        },\n        network_relay_url: \"wss://relay.widgetry.org/\",\n        screen_container: this.$refs.screenContainer,\n        autostart: true,\n      };\n      // Mount Machine\n      const V86Starter = window.V86Starter;\n      this.emulator = new V86Starter(config);\n      // Return Machine\n      return this.emulator;\n    },\n    machineSetupEventListener(machine) {\n      for (const e of this.emulatorEventMethods) {\n        machine.add_listener(e.name, e.method);\n      }\n    },\n    machinePowerPause(machine) {\n      if (!this.emulatorExtendedInfo.isPaused) {\n        machine.stop();\n        this.emulatorExtendedInfo.isPaused = true;\n      } else {\n        machine.run();\n        this.emulatorExtendedInfo.isPaused = false;\n      }\n    },\n    machinePowerReset(machine) {\n      machine.restart();\n    },\n    documentLockMouse() {\n      const body = document.body;\n      const method =\n        body.requestPointerLock ||\n        body.mozRequestPointerLock ||\n        body.webkitRequestPointerLock ||\n        body.msRequestPointerLock;\n      if (method) {\n        method.call(body);\n      } else {\n        console.warn(\"The browser is not support requestPointerLock\");\n      }\n    },\n    documentRequestFullScreen() {\n      const element = this.$refs.screenContainer;\n      const method =\n        element.requestFullscreen ||\n        element.mozRequestFullScreen ||\n        element.webkitRequestFullscreen ||\n        element.msRequestFullscreen;\n      if (method) {\n        method.call(element);\n      } else {\n        console.warn(\"The browser is not support requestFullscreen\");\n      }\n    },\n    documentRequestExitFullScreen() {\n      const method =\n        document.exitFullscreen ||\n        document.mozCancelFullScreen ||\n        document.webkitExitFullscreen ||\n        document.msExitFullscreen;\n      if (method) {\n        method.call(document);\n      } else {\n        console.warn(\"The browser is not support exitFullscreen\");\n      }\n    },\n    documentHandleClickBox() {\n      if (this.emulatorExtendedInfo.mouseEnabled) {\n        this.documentLockMouse();\n      }\n    },\n    documentHandleClickButtonPause() {\n      this.machinePowerPause(this.emulator);\n    },\n    documentHandleClickButtonReset() {\n      this.machinePowerReset(this.emulator);\n    },\n    documentHandleClickButtonFullScreen() {\n      this.documentRequestFullScreen();\n    },\n  },\n  mounted() {\n    const machine = this.machineBoot();\n    this.machineSetupEventListener(machine);\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomeView.vue?vue&type=template&id=486c880e&\"\nimport script from \"./HomeView.vue?vue&type=script&lang=js&\"\nexport * from \"./HomeView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","documentHandleClickBox","ref","attrs","documentHandleClickButtonPause","_v","_s","emulatorExtendedInfo","isPaused","documentHandleClickButtonFullScreen","documentHandleClickButtonReset","staticRenderFns","name","data","emulator","mouseEnabled","computed","emulatorEventMethods","method","methods","machineBoot","config","wasm_path","memory_size","vga_memory_size","cdrom","url","size","bios","vga_bios","network_relay_url","screen_container","$refs","screenContainer","autostart","V86Starter","window","machineSetupEventListener","machine","e","add_listener","machinePowerPause","run","stop","machinePowerReset","restart","documentLockMouse","body","document","call","console","warn","documentRequestFullScreen","element","documentRequestExitFullScreen","mounted","component"],"sourceRoot":""}