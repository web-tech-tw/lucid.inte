{"version":3,"file":"js/503.fc7eb19d.js","mappings":"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","sources":["webpack://lucid.inte/./src/views/HomeView.vue?567a","webpack://lucid.inte/src/views/HomeView.vue","webpack://lucid.inte/./src/views/HomeView.vue?4768","webpack://lucid.inte/./src/views/HomeView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"bg-black min-h-screen overflow-hidden\",on:{\"click\":_vm.documentHandleClickBox}},[_c('div',{ref:\"screenContainer\"},[_c('div',{attrs:{\"id\":\"screen\"}}),_c('canvas',{staticClass:\"mx-auto\",attrs:{\"id\":\"vga\"}})])]),_c('div',{staticClass:\"mt-5 px-3 w-full flex justify-between\"},[_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonPause}},[_vm._v(\" \"+_vm._s(_vm.emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\")+\" \")]),_c('button',{staticClass:\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonFullScreen}},[_vm._v(\" 進入全螢幕 \")]),_c('button',{staticClass:\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\",on:{\"click\":_vm.documentHandleClickButtonReset}},[_vm._v(\" 重置 \")])]),_c('div',{staticClass:\"mt-5 flex justify-center\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.keyboard),expression:\"keyboard\"}],staticClass:\"rounded-md resize-none border-2 text-center\",attrs:{\"placeholder\":\"虛擬鍵盤呼出器\"},domProps:{\"value\":(_vm.keyboard)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.keyboard=$event.target.value}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      class=\"bg-black min-h-screen overflow-hidden\"\n      @click=\"documentHandleClickBox\"\n    >\n      <div ref=\"screenContainer\">\n        <div id=\"screen\"></div>\n        <canvas id=\"vga\" class=\"mx-auto\"></canvas>\n      </div>\n    </div>\n    <div class=\"mt-5 px-3 w-full flex justify-between\">\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonPause\"\n      >\n        {{ emulatorExtendedInfo.isPaused ? \"恢復\" : \"暫停\" }}\n      </button>\n      <button\n        class=\"w-28 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonFullScreen\"\n      >\n        進入全螢幕\n      </button>\n      <button\n        class=\"w-16 text-base font-medium text-gray-600 hover:text-gray-500\"\n        @click=\"documentHandleClickButtonReset\"\n      >\n        重置\n      </button>\n    </div>\n    <div class=\"mt-5 flex justify-center\">\n      <textarea\n        v-model=\"keyboard\"\n        class=\"rounded-md resize-none border-2 text-center\"\n        placeholder=\"虛擬鍵盤呼出器\"\n      ></textarea>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"HomeView\",\n  data: () => ({\n    emulator: null,\n    emulatorExtendedInfo: {\n      isPaused: false,\n      mouseEnabled: false,\n    },\n    keyboard: \"\",\n  }),\n  watch: {\n    keyboard() {\n      const requestAnimationFrame = window.requestAnimationFrame;\n      requestAnimationFrame(() => {\n        this.keyboard = \"\";\n      });\n    },\n  },\n  computed: {\n    emulatorEventMethods() {\n      return [\n        {\n          name: \"mouse-enable\",\n          method: (isEnabled) => {\n            this.emulatorExtendedInfo.mouseEnabled = isEnabled;\n          },\n        },\n        {\n          name: \"emulator-stopped\",\n          method: () => {\n            this.documentRequestExitFullScreen();\n          },\n        },\n      ];\n    },\n  },\n  methods: {\n    machineBoot() {\n      // Define Config\n      const config = {\n        wasm_path: \"./v86.wasm\",\n        memory_size: 256 * 1024 * 1024,\n        vga_memory_size: 8 * 1024 * 1024,\n        cdrom: {\n          url: \"./machine/system.iso\",\n          size: 36419584,\n        },\n        bios: {\n          url: \"./machine/bios/seabios.bin\",\n        },\n        vga_bios: {\n          url: \"./machine/bios/vgabios.bin\",\n        },\n        network_relay_url: \"wss://relay.widgetry.org/\",\n        screen_container: this.$refs.screenContainer,\n        autostart: true,\n      };\n      // Mount Machine\n      const V86Starter = window.V86Starter;\n      this.emulator = new V86Starter(config);\n      // Return Machine\n      return this.emulator;\n    },\n    machineSetupEventListener(machine) {\n      for (const e of this.emulatorEventMethods) {\n        machine.add_listener(e.name, e.method);\n      }\n    },\n    machinePowerPause(machine) {\n      if (!this.emulatorExtendedInfo.isPaused) {\n        machine.stop();\n        this.emulatorExtendedInfo.isPaused = true;\n      } else {\n        machine.run();\n        this.emulatorExtendedInfo.isPaused = false;\n      }\n    },\n    machinePowerReset(machine) {\n      machine.restart();\n    },\n    documentLockMouse() {\n      const body = document.body;\n      const method =\n        body.requestPointerLock ||\n        body.mozRequestPointerLock ||\n        body.webkitRequestPointerLock ||\n        body.msRequestPointerLock;\n      if (method) {\n        method.call(body);\n      } else {\n        console.warn(\"The browser is not support requestPointerLock\");\n      }\n    },\n    documentRequestFullScreen() {\n      const element = this.$refs.screenContainer;\n      const method =\n        element.requestFullscreen ||\n        element.mozRequestFullScreen ||\n        element.webkitRequestFullscreen ||\n        element.msRequestFullscreen;\n      if (method) {\n        method.call(element);\n      } else {\n        console.warn(\"The browser is not support requestFullscreen\");\n      }\n    },\n    documentRequestExitFullScreen() {\n      const method =\n        document.exitFullscreen ||\n        document.mozCancelFullScreen ||\n        document.webkitExitFullscreen ||\n        document.msExitFullscreen;\n      if (method) {\n        method.call(document);\n      } else {\n        console.warn(\"The browser is not support exitFullscreen\");\n      }\n    },\n    documentHandleClickBox() {\n      if (this.emulatorExtendedInfo.mouseEnabled) {\n        this.documentLockMouse();\n      }\n    },\n    documentHandleClickButtonPause() {\n      this.machinePowerPause(this.emulator);\n    },\n    documentHandleClickButtonReset() {\n      this.machinePowerReset(this.emulator);\n    },\n    documentHandleClickButtonFullScreen() {\n      this.documentRequestFullScreen();\n    },\n  },\n  mounted() {\n    const machine = this.machineBoot();\n    this.machineSetupEventListener(machine);\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HomeView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomeView.vue?vue&type=template&id=1ace53f6&\"\nimport script from \"./HomeView.vue?vue&type=script&lang=js&\"\nexport * from \"./HomeView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","documentHandleClickBox","ref","attrs","documentHandleClickButtonPause","_v","_s","emulatorExtendedInfo","isPaused","documentHandleClickButtonFullScreen","documentHandleClickButtonReset","directives","name","rawName","value","expression","domProps","$event","target","composing","keyboard","staticRenderFns","data","emulator","mouseEnabled","watch","requestAnimationFrame","window","computed","emulatorEventMethods","method","methods","machineBoot","config","wasm_path","memory_size","vga_memory_size","cdrom","url","size","bios","vga_bios","network_relay_url","screen_container","$refs","screenContainer","autostart","V86Starter","machineSetupEventListener","machine","e","add_listener","machinePowerPause","run","stop","machinePowerReset","restart","documentLockMouse","body","document","call","console","warn","documentRequestFullScreen","element","documentRequestExitFullScreen","mounted","component"],"sourceRoot":""}